<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Font Generator ‚Äî PirateRuler</title>
<meta name="description" content="Font Generator by PirateRuler ‚Äî fancy text transforms client-side.  No API." />
<meta name="theme-color" content="#f7fbff" />
<link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect rx="14" width="64" height="64" fill="%236b7dff"/><text x="50%" y="50%" font-family="Inter,Arial,sans-serif" font-weight="800" font-size="26" text-anchor="middle" alignment-baseline="central" fill="white">PR</text></svg>'>
<style>
  :root{
    --bg:#f3f7fb; --card:#ffffff; --muted:#6b7480; --text:#0b2130;
    --accent-start:#6b7dff; --accent-end:#0bb3ff;
    --glass: rgba(11,17,28,0.04);
    --radius:14px; --shadow-lg: 0 18px 50px rgba(3,12,30,0.18);
    --shadow-sm: 0 8px 24px rgba(3,12,30,0.08);
  }
  html.dark{ --bg:#071225; --card:#071827; --muted:#98a7bf; --text:#e9f1ff; --accent-start:#5ab3ff; --accent-end:#6b7dff; --glass: rgba(255,255,255,0.02); --shadow-lg: 0 18px 50px rgba(0,0,0,0.6); --shadow-sm: 0 8px 24px rgba(0,0,0,0.45); }
  html.ocean{ --bg:#e8f7fb; --card:#fff; --muted:#4f6b75; --text:#063242; --accent-start:#00c2d1; --accent-end:#2b9fff; }
  html.sunset{ --bg:#fff6f8; --card:#fff; --muted:#7a6b77; --text:#2a1020; --accent-start:#ff7aa2; --accent-end:#ffb86b; }

  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);background:linear-gradient(180deg,var(--bg),#e9f6ff);-webkit-font-smoothing:antialiased}
  a{color:inherit;text-decoration:none}
  .container{max-width:1100px;margin:14px auto;padding:14px}

  /* header */
  header.header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px;border-radius:12px;background:linear-gradient(90deg, rgba(107,125,255,0.06), rgba(11,179,255,0.02));box-shadow:var(--shadow-sm)}
  .brand{display:flex;gap:12px;align-items:center;min-width:0}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900}
  .brand-title .title-strong{font-size:18px;font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .brand-title .by{font-size:12px;color:var(--muted);margin-top:2px}

  .header-actions{display:flex;align-items:center;gap:8px}
  .btn{padding:8px 10px;border-radius:10px;border:none;cursor:pointer;font-weight:800;background:transparent}
  .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06)}
  .btn.theme{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:#fff;border-radius:999px;padding:8px 12px;box-shadow:0 6px 18px rgba(107,125,255,0.12)}
  /* glow variant */
  .btn.theme.glow{box-shadow:0 10px 30px rgba(107,125,255,0.28), 0 0 20px rgba(107,125,255,0.12) inset}

  .hamb{width:46px;height:46px;border-radius:10px;background:var(--glass);display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(0,0,0,0.04)}

  /* hero / input */
  .hero{margin-top:16px;padding:18px;border-radius:14px;background:var(--card);box-shadow:var(--shadow-lg);border:1px solid rgba(0,0,0,0.04)}
  .hero .title{font-size:22px;font-weight:900;margin:0}
  .hero .hint{color:var(--muted);margin-top:6px}

  .controls{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;align-items:center}
  .input{flex:1;min-width:180px}
  input[type="text"]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:16px;background:var(--card);color:var(--text)}
  button.primary{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:white;padding:10px 16px;border-radius:10px;border:none;font-weight:800;cursor:pointer}

  .small-actions{display:flex;gap:8px;align-items:center;margin-left:8px}

  /* results */
  .results{margin-top:18px}
  .results-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:var(--shadow-sm);border:1px solid rgba(0,0,0,0.04);margin-top:12px}
  .result-row{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.04);margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.6), transparent)}
  .result-left{flex:1;min-width:0}
  .result-title{font-weight:700}
  .result-sub{color:var(--muted);font-size:13px;margin-top:6px}
  .result-actions{display:flex;gap:8px}
  .btn.copy{padding:8px 12px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.06);cursor:pointer;font-weight:700}
  .btn.use{padding:8px 12px;border-radius:10px;background:rgba(0,0,0,0.04);border:1px solid rgba(0,0,0,0.04);cursor:pointer;font-weight:700}

  .category-title{font-weight:900;margin:6px 0 12px 0}
  .load-more{display:block;margin:8px auto;padding:10px 14px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:transparent;cursor:pointer;font-weight:800}

  /* sidebar */
  .sidebar{position:fixed;right:18px;top:90px;width:320px;background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow-lg);border:1px solid rgba(0,0,0,0.06)}
  .sidebar h3{margin:0 0 8px 0}
  .sidebar a{display:block;padding:8px;border-radius:8px;color:var(--text);text-decoration:none}
  .sidebar .muted{color:var(--muted);font-size:13px}

  footer{margin-top:18px;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.96));text-align:center;box-shadow:var(--shadow-lg)}
  .visit{padding:10px 18px;border-radius:999px;background:linear-gradient(90deg,#ff7aa2 0%, #6b7dff 100%);color:#fff;font-weight:800;text-decoration:none;display:inline-block}

  /* responsive */
  @media(max-width:980px){
    .sidebar{position:static;width:auto;margin-top:12px}
  }
  @media(max-width:520px){
    .logo{width:48px;height:48px}
    .brand-title .title-strong{font-size:16px}
    .controls{flex-direction:column;align-items:stretch}
    .result-actions{flex-direction:row-reverse}
  }
</style>
</head>
<body>
<div class="container">
  <header class="header" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">PR</div>
      <div class="brand-title">
        <div class="title-strong">Font Generator</div>
        <div class="by">by PirateRuler.com</div>
      </div>
    </div>

    <div class="header-actions" role="navigation">
      <div class="theme-select" id="themeSelectWrap">
        <button id="themeBtn" class="btn theme glow" title="Theme">Light ‚ñæ</button>
        <div id="themeList" style="display:none;position:absolute;right:18px;top:72px;background:var(--card);border-radius:10px;padding:8px;box-shadow:var(--shadow-sm);z-index:1000;">
          <div class="theme-item" data-theme="light" style="padding:8px;cursor:pointer">Light</div>
          <div class="theme-item" data-theme="dark" style="padding:8px;cursor:pointer">Dark</div>
          <div class="theme-item" data-theme="ocean" style="padding:8px;cursor:pointer">Ocean</div>
          <div class="theme-item" data-theme="sunset" style="padding:8px;cursor:pointer">Sunset</div>
        </div>
      </div>
      <div id="hambBtn" class="hamb" title="Open menu" aria-haspopup="true" aria-controls="sidebar">‚ò∞</div>
    </div>
  </header>

  <section class="hero" aria-labelledby="heroTitle">
    <h1 id="heroTitle" class="title">Font Generator</h1>
    <div class="hint">Type text below and get stylized versions you can copy ‚Äî client-side, no API.</div>
    <div class="controls">
      <div class="input">
        <input id="inputText" type="text" placeholder="Type something to transform ‚Äî e.g. PirateRuler" value="PirateRuler" />
      </div>
      <button id="generateBtn" class="primary">Generate</button>

      <div class="small-actions">
        <button id="copyAllBtn" class="btn ghost">Copy All</button>
        <button id="downloadBtn" class="btn ghost">Download .txt</button>
      </div>
    </div>
  </section>

  <div class="results" id="results">
    <div class="results-header">
      <div><strong id="countLabel">0</strong> results</div>
      <div class="muted">Client-side transforms ‚Äî no API</div>
    </div>
    <!-- categories + transforms injected here -->
  </div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar" aria-hidden="false">
    <div style="display:flex;justify-content:flex-end"><button id="closeSidebar" class="btn ghost">Close</button></div>
    <h3>PirateRuler Links</h3>
    <nav style="display:flex;flex-direction:column;gap:8px;margin-top:10px">
      <a href="/post/about.html" target="_blank" rel="noopener noreferrer">About ‚Äî PirateRuler</a>
      <a href="/post/privacy.html" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
      <a href="/post/contact.html" target="_blank" rel="noopener noreferrer">Contact</a>
      <a href="/post/terms.html" target="_blank" rel="noopener noreferrer">Terms & Service</a>
    </nav>
    <div style="margin-top:18px;color:var(--muted);font-size:13px">
      If this site is offline you can visit PirateRuler for backups & resources: <a href="https://pirateruler.com" target="_blank">pirateruler.com</a>
    </div>
  </aside>

  <footer>
    <div style="margin-bottom:8px">About PirateRuler Fonts ‚Äî lightweight client-side font transforms for social captions, bios, and design mockups.</div>
    <a class="visit" href="https://pirateruler.com" target="_blank" rel="noopener noreferrer">Visit PirateRuler.com</a>
    <div style="height:8px"></div>
    <small class="muted">¬© <span id="year"></span> PirateRuler</small>
  </footer>
</div>

<script>
/* PirateRuler Font Generator ‚Äî client-side transforms (no API) */

/* ---------- Utilities ---------- */
const el = id => document.getElementById(id);
const yearEl = el('year'); yearEl.textContent = new Date().getFullYear();

function copyText(text){
  if(!navigator.clipboard) {
    const ta = document.createElement('textarea');
    ta.value = text; document.body.appendChild(ta); ta.select();
    try { document.execCommand('copy'); } catch(e){ console.warn(e); }
    ta.remove();
    return;
  }
  return navigator.clipboard.writeText(text);
}

function downloadText(filename, text){
  const a = document.createElement('a');
  a.href = URL.createObjectURL(new Blob([text], {type:'text/plain'}));
  a.download = filename; a.click(); URL.revokeObjectURL(a.href);
}

/* ---------- Transform helpers (maps) ---------- */
/* Create mapping functions for many common unicode transforms.
   Each transform should accept a normal string and return transformed string.
*/

function mapByOffset(s, offsetUpper, offsetLower){
  // simple offset mapping for ascii A-Z / a-z where applicable
  return Array.from(s).map(ch => {
    const code = ch.charCodeAt(0);
    if(code >= 65 && code <= 90 && offsetUpper) return String.fromCharCode(code + offsetUpper);
    if(code >= 97 && code <= 122 && offsetLower) return String.fromCharCode(code + offsetLower);
    return ch;
  }).join('');
}

/* maps using explicit lookup tables */
function mapWithTable(s, table){
  return Array.from(s).map(c => table[c] ?? table[c.toLowerCase()] ?? c).join('');
}

/* helper to build repeated char transformations */
function repeatSep(s, sep){
  return Array.from(s).join(sep);
}

/* small-caps mapping (approx) */
const SMALL_CAPS = {
  a:'·¥Ä', b:' ô', c:'·¥Ñ', d:'·¥Ö', e:'·¥á', f:'Íú∞', g:'…¢', h:' ú', i:'…™', j:'·¥ä', k:'·¥ã', l:' ü', m:'·¥ç',
  n:'…¥', o:'·¥è', p:'·¥ò', q:'«´', r:' Ä', s:'s', t:'·¥õ', u:'·¥ú', v:'·¥†', w:'·¥°', x:'x', y:' è', z:'·¥¢'
};

/* upside down mapping */
const UPSIDE_DOWN = {
  a:'…ê', b:'q', c:'…î', d:'p', e:'«ù', f:'…ü', g:'…ì', h:'…•', i:'·¥â', j:'…æ', k:' û', l:' É', m:'…Ø', n:'u',
  o:'o', p:'d', q:'b', r:'…π', s:'s', t:' á', u:'n', v:' å', w:' ç', x:'x', y:' é', z:'z',
  '.':'Àô', '?':'¬ø', '!':'¬°', '\'':',', '"':'‚Äû', '(':')', ')':'(', '[':']', ']':'[', '<':'>', '>':'<', '_':'‚Äæ'
};

/* boxed / squared: using enclosing characters or boxed letters (limited) */
const CIRCLE_MAP = (function(){
  const map = {};
  const base = "0123456789abcdefghijklmnopqrstuvwxyz";
  const circ = ["‚ì™","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®"];
  for(let i=0;i<10;i++) map[String(i)] = circ[i];
  // limited circled letters use Unicode 24B6 etc for A-Z
  for(let i=0;i<26;i++){
    map[String.fromCharCode(97+i)] = String.fromCharCode(0x24D0 + i); // ‚ìê etc (lower)
    map[String.fromCharCode(65+i)] = String.fromCharCode(0x24B6 + i); // ‚í∂ etc (upper)
  }
  return map;
})();

/* double struck (math bold) limited mapping for A-Z a-z 0-9 (uses Mathematical Double-Struck with gaps)
   Not all letters exist; fallback to similar glyphs.
*/
const DOUBLESTRUCK = (function(){
  const map = {};
  // Unicode double-struck capital starts at 0x1D538 for A (may not render everywhere) ‚Äî fallback for many by custom mapping
  const caps = {
    A:'ùî∏', B:'ùîπ', C:'‚ÑÇ', D:'ùîª', E:'ùîº', F:'ùîΩ', G:'ùîæ', H:'‚Ñç', I:'ùïÄ', J:'ùïÅ', K:'ùïÇ', L:'ùïÉ', M:'ùïÑ', N:'‚Ñï',
    O:'ùïÜ', P:'‚Ñô', Q:'‚Ñö', R:'‚Ñù', S:'ùïä', T:'ùïã', U:'ùïå', V:'ùïç', W:'ùïé', X:'ùïè', Y:'ùïê', Z:'‚Ñ§'
  };
  const smalls = {
    a:'ùïí', b:'ùïì', c:'ùïî', d:'ùïï', e:'ùïñ', f:'ùïó', g:'ùïò', h:'ùïô', i:'ùïö', j:'ùïõ', k:'ùïú', l:'ùïù', m:'ùïû',
    n:'ùïü', o:'ùï†', p:'ùï°', q:'ùï¢', r:'ùï£', s:'ùï§', t:'ùï•', u:'ùï¶', v:'ùïß', w:'ùï®', x:'ùï©', y:'ùï™', z:'ùï´'
  };
  Object.assign(map, caps, smalls);
  for(let i=0;i<10;i++) map[String(i)] = "0Ô∏è‚É£"[i] || String(i);
  return map;
})();

/* a bunch of small tables for special styles (fraktur, bold italic, monospace, fullwidth, bubble, squared)  */
const FULLWIDTH = (function(){
  const table={}; const A=0xFF21;
  for(let i=0;i<26;i++){ table[String.fromCharCode(65+i)] = String.fromCharCode(A+i); }
  const a=0xFF41;
  for(let i=0;i<26;i++){ table[String.fromCharCode(97+i)] = String.fromCharCode(a+i); }
  for(let i=0;i<10;i++){ table[String(i)] = String.fromCharCode(0xFF10+i); }
  return table;
})();

const MONOSPACE = (function(){
  const map={}; // use monospace mathematical block
  const a=0x1D68A; // math monospace small a (some may not render)
  // fallback: use simple replacements for letters via code points where available
  const upper = "ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâ".split('');
  const lower = "ùöäùöãùöåùöçùöéùöèùöêùöëùöíùöìùöîùöïùöñùöóùöòùöôùööùöõùöúùöùùöûùöüùö†ùö°ùö¢ùö£".split('');
  for(let i=0;i<26;i++){ map[String.fromCharCode(65+i)] = upper[i]; map[String.fromCharCode(97+i)] = lower[i]; }
  for(let i=0;i<10;i++) map[String(i)] = String.fromCharCode(0xFF10+i);
  return map;
})();

const BUBBLE = (function(){
  const m={};
  const upStart = 0x1F150; // not continuous; fallback to circled letters for many; use circled for sample
  // use circled for letters
  for(let i=0;i<26;i++){ m[String.fromCharCode(65+i)] = String.fromCharCode(0x24B6 + i); m[String.fromCharCode(97+i)] = String.fromCharCode(0x24D0 + i); }
  for(let i=0;i<10;i++) m[String(i)] = ["‚ì™","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®"][i];
  return m;
})();

/* mirrored / flipped (simple approximate) */
const MIRROR = { a:'…í', b:'q', c:'…î', d:'p', e:'…ò', f:'…ü', g:'…ì', h:'…•', i:'ƒ±', j:'…æ', k:' û', l:'l', m:'…Ø', n:'u', o:'o', p:'d', q:'b', r:'…ø', s:'s', t:' á', u:'n', v:' å', w:' ç', x:'x', y:' é', z:'z' };

/* stylized accent combiner (combining diacritics) */
const COMBINING = ['Ã∑','Ã¥','Ã∂','Ãµ','Ã∫','Ãª','Ãº','ÃΩ','Ãæ','Ãø','Õé','Õç','Õå','Õë','Õò','Ã¥','Ãï'];

/* ---------- Transform definitions ---------- */
/* Each entry: { id, name, category, fn(text) } */
const TRANSFORMS = [
  { id:'plain', name:'Plain', cat:'Basic', fn: t => t },
  { id:'upper', name:'UPPERCASE', cat:'Case', fn: t => t.toUpperCase() },
  { id:'lower', name:'lowercase', cat:'Case', fn: t => t.toLowerCase() },
  { id:'title', name:'Title Case', cat:'Case', fn: t => t.replace(/\w\S*/g, s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()) },
  { id:'spaced', name:'P i r a t e (spaced)', cat:'Spacing', fn: t => Array.from(t).join(' ') },
  { id:'doublespace', name:'Double spaced', cat:'Spacing', fn: t => t.split(' ').map(w => w.split('').join(' ')).join('  ') },

  { id:'fullwidth', name:'Fullwidth', cat:'Symbols', fn: t => mapWithTable(t, FULLWIDTH) },
  { id:'monospace', name:'Monospace', cat:'Symbols', fn: t => mapWithTable(t, MONOSPACE) },
  { id:'double', name:'Double-struck', cat:'Math', fn: t => mapWithTable(t, DOUBLESTRUCK) },
  { id:'bubble', name:'Bubble (‚ìê)', cat:'Fancy', fn: t => mapWithTable(t, BUBBLE) },
  { id:'circled', name:'Circled', cat:'Fancy', fn: t => mapWithTable(t, CIRCLE_MAP) },

  { id:'smallcaps', name:'Small Caps', cat:'Case', fn: t => mapWithTable(t.toLowerCase(), SMALL_CAPS) },
  { id:'upsidedown', name:'Upside Down', cat:'Fancy', fn: t => Array.from(t).reverse().map(ch => UPSIDE_DOWN[ch.toLowerCase()] ?? UPSIDE_DOWN[ch] ?? ch).join('') },

  { id:'fraktur', name:'Fraktur', cat:'Fancy', fn: t => mapWithTable(t, {
    A:'ùîÑ', B:'ùîÖ', C:'‚Ñ≠', D:'ùîá', E:'ùîà', F:'ùîâ', G:'ùîä', H:'‚Ñå', I:'‚Ñë', J:'ùîç', K:'ùîé', L:'ùîè', M:'ùîê', N:'ùîë', O:'ùîí', P:'ùîì', Q:'ùîî', R:'‚Ñú', S:'ùîñ', T:'ùîó', U:'ùîò', V:'ùîô', W:'ùîö', X:'ùîõ', Y:'ùîú', Z:'‚Ñ®',
    a:'ùîû', b:'ùîü', c:'ùî†', d:'ùî°', e:'ùî¢', f:'ùî£', g:'ùî§', h:'ùî•', i:'ùî¶', j:'ùîß', k:'ùî®', l:'ùî©', m:'ùî™', n:'ùî´', o:'ùî¨', p:'ùî≠', q:'ùîÆ', r:'ùîØ', s:'ùî∞', t:'ùî±', u:'ùî≤', v:'ùî≥', w:'ùî¥', x:'ùîµ', y:'ùî∂', z:'ùî∑'
  }) },

  { id:'bolditalic', name:'Bold Italic', cat:'Fancy', fn: t => mapWithTable(t, {
    A:'ùë®',B:'ùë©',C:'ùë™',D:'ùë´',E:'ùë¨',F:'ùë≠',G:'ùëÆ',H:'ùëØ',I:'ùë∞',J:'ùë±',K:'ùë≤',L:'ùë≥',M:'ùë¥',N:'ùëµ',O:'ùë∂',P:'ùë∑',Q:'ùë∏',R:'ùëπ',S:'ùë∫',T:'ùëª',U:'ùëº',V:'ùëΩ',W:'ùëæ',X:'ùëø',Y:'ùíÄ',Z:'ùíÅ',
    a:'ùíÇ',b:'ùíÉ',c:'ùíÑ',d:'ùíÖ',e:'ùíÜ',f:'ùíá',g:'ùíà',h:'ùíâ',i:'ùíä',j:'ùíã',k:'ùíå',l:'ùíç',m:'ùíé',n:'ùíè',o:'ùíê',p:'ùíë',q:'ùíí',r:'ùíì',s:'ùíî',t:'ùíï',u:'ùíñ',v:'ùíó',w:'ùíò',x:'ùíô',y:'ùíö',z:'ùíõ'
  }) },

  { id:'bold', name:'Bold Sans (ùêÅùêéùêãùêÉ)', cat:'Fancy', fn: t => mapWithTable(t, {
    A:'ùêÄ',B:'ùêÅ',C:'ùêÇ',D:'ùêÉ',E:'ùêÑ',F:'ùêÖ',G:'ùêÜ',H:'ùêá',I:'ùêà',J:'ùêâ',K:'ùêä',L:'ùêã',M:'ùêå',N:'ùêç',O:'ùêé',P:'ùêè',Q:'ùêê',R:'ùêë',S:'ùêí',T:'ùêì',U:'ùêî',V:'ùêï',W:'ùêñ',X:'ùêó',Y:'ùêò',Z:'ùêô',
    a:'ùêö',b:'ùêõ',c:'ùêú',d:'ùêù',e:'ùêû',f:'ùêü',g:'ùê†',h:'ùê°',i:'ùê¢',j:'ùê£',k:'ùê§',l:'ùê•',m:'ùê¶',n:'ùêß',o:'ùê®',p:'ùê©',q:'ùê™',r:'ùê´',s:'ùê¨',t:'ùê≠',u:'ùêÆ',v:'ùêØ',w:'ùê∞',x:'ùê±',y:'ùê≤',z:'ùê≥'
  }) },

  { id:'italic', name:'Italic', cat:'Fancy', fn: t => mapWithTable(t, {
    A:'ùê¥',B:'ùêµ',C:'ùê∂',D:'ùê∑',E:'ùê∏',F:'ùêπ',G:'ùê∫',H:'ùêª',I:'ùêº',J:'ùêΩ',K:'ùêæ',L:'ùêø',M:'ùëÄ',N:'ùëÅ',O:'ùëÇ',P:'ùëÉ',Q:'ùëÑ',R:'ùëÖ',S:'ùëÜ',T:'ùëá',U:'ùëà',V:'ùëâ',W:'ùëä',X:'ùëã',Y:'ùëå',Z:'ùëç',
    a:'ùëé',b:'ùëè',c:'ùëê',d:'ùëë',e:'ùëí',f:'ùëì',g:'ùëî',h:'‚Ñé',i:'ùëñ',j:'ùëó',k:'ùëò',l:'ùëô',m:'ùëö',n:'ùëõ',o:'ùëú',p:'ùëù',q:'ùëû',r:'ùëü',s:'ùë†',t:'ùë°',u:'ùë¢',v:'ùë£',w:'ùë§',x:'ùë•',y:'ùë¶',z:'ùëß'
  }) },

  { id:'squared', name:'Squared', cat:'Boxes', fn: t => Array.from(t).map(ch => {
    // small boxed letters: use enclosed alphanumeric where possible; else fallback
    const code = ch.charCodeAt(0);
    if(code>=65 && code<=90) return String.fromCharCode(0x1F170 + (code-65)); // may not always exist
    if(code>=97 && code<=122) return String.fromCharCode(0x24FF); // fallback white square
    return ch;
  }).join('') },

  { id:'parenthesis', name:'(p)(i)(r)(a)(t)(e)', cat:'Boxes', fn: t => Array.from(t).map(c => '('+c+')').join('') },
  { id:'brackets', name:'[p][i][r][a][t][e]', cat:'Boxes', fn: t => Array.from(t).map(c => '['+c+']').join('') },

  { id:'boxed-squares', name:'Light Text Squares', cat:'Boxes', fn: t => t.split('').map(c => '‚ñ£'+c).join('') },
  { id:'stars', name:'‚òÜ P ‚òÜ i ‚òÜ r ‚òÜ a ‚òÜ t ‚òÜ e ‚òÜ', cat:'Symbols', fn: t => Array.from(t).map(c => '‚òÜ'+c).join('') },

  { id:'accented', name:'Combining Accents', cat:'Accents', fn: t => Array.from(t).map(c => c + (COMBINING[Math.floor(Math.random()*COMBINING.length)] || '')).join('') },

  { id:'leet', name:'Leetspeak 1337', cat:'Fun', fn: t => mapWithTable(t.toLowerCase(), { a:'4', b:'8', c:'(', d:'|)', e:'3', f:'ph', g:'6', h:'#', i:'1', j:'_|', k:'|<', l:'1', m:'/\\/\\', n:'|\\|', o:'0', p:'|*', q:'(,)', r:'|2', s:'5', t:'7', u:'|_|', v:'\\/', w:'\\/\\/', x:'><', y:'`/', z:'2' }) },

  { id:'reverse', name:'Reverse text', cat:'Misc', fn: t => Array.from(t).reverse().join('') },

  { id:'mirror', name:'Mirror-ish', cat:'Fancy2', fn: t => mapWithTable(t, MIRROR) },

  { id:'squared-0', name:'Enclosed squares', cat:'Boxes', fn: t => Array.from(t).map(c => '‚ñ¢'+c).join('') },

  { id:'tiny', name:'Small Subscript-ish', cat:'Symbols', fn: t => mapWithTable(t, {
    a:'‚Çê', e:'‚Çë', i:'·µ¢', o:'‚Çí', r:'·µ£', u:'·µ§', v:'·µ•', p:'·µ®', h:'‚Çï', k:'‚Çñ', m:'‚Çò', t:'‚Çú', s:'‚Çõ', b:'·µ¶', c:'·∂ú', d:'·µà', f:'ùíª', g:'·µç', l:'‚Çó', n:'·µë', y:'·µß'
  }) },

  { id:'boxed-emoji', name:'Emoji box', cat:'Boxes', fn: t => Array.from(t).map(c => 'üî≤'+c).join('') },

  // more variants using standard unicode transforms when available:
  { id:'full-italic', name:'Mathematical Italic', cat:'Fancy2', fn: t => mapWithTable(t, {
    A:'ùë®',B:'ùë©',C:'ùë™',D:'ùë´',E:'ùë¨',F:'ùë≠',G:'ùëÆ',H:'ùëØ',I:'ùë∞',J:'ùë±',K:'ùë≤',L:'ùë≥',M:'ùë¥',N:'ùëµ',O:'ùë∂',P:'ùë∑',Q:'ùë∏',R:'ùëπ',S:'ùë∫',T:'ùëª',U:'ùëº',V:'ùëΩ',W:'ùëæ',X:'ùëø',Y:'ùíÄ',Z:'ùíÅ',
    a:'ùíÇ',b:'ùíÉ',c:'ùíÑ',d:'ùíÖ',e:'ùíÜ',f:'ùíá',g:'ùíà',h:'ùíâ',i:'ùíä',j:'ùíã',k:'ùíå',l:'ùíç',m:'ùíé',n:'ùíè',o:'ùíê',p:'ùíë',q:'ùíí',r:'ùíì',s:'ùíî',t:'ùíï',u:'ùíñ',v:'ùíó',w:'ùíò',x:'ùíô',y:'ùíö',z:'ùíõ'
  }) },

  { id:'dotted', name:'Dotted (p¬∑i¬∑r¬∑a¬∑t¬∑e)', cat:'Spacing', fn: t => Array.from(t).join('¬∑') },
  { id:'arrow', name:'Arrowed ‚Üí p‚Üíi‚Üír‚Üía‚Üít‚Üíe', cat:'Symbols', fn: t => Array.from(t).join('‚Üí') },

  { id:'stagger', name:'StAgGeReD', cat:'Case', fn: t => Array.from(t).map((c,i)=> i%2? c.toLowerCase(): c.toUpperCase()).join('') },

  /* more fun transforms */
  { id:'squiggle', name:'ÀúÀúPirateÀúÀú', cat:'Fun', fn: t => `ÀúÀú${t}ÀúÀú` },
  { id:'boxed-stars', name:'‚ú¶ Pirate ‚ú¶', cat:'Fun', fn: t => `‚ú¶ ${t} ‚ú¶` },

  { id:'wide', name:'Wide (spacing)', cat:'Spacing', fn: t => Array.from(t).map(c=>c+' ').join('') },

  { id:'accent-up', name:'Combining Up', cat:'Accents', fn: t => Array.from(t).map(c=>c+'\u0301').join('') }, // acute

  { id:'accent-dot', name:'Dotty Ãá', cat:'Accents', fn: t => Array.from(t).map(c=>c+'\u0307').join('') },

  { id:'sanskrit', name:'Sanskrit-ish (dev fallback)', cat:'Fancy2', fn: t => mapWithTable(t.toLowerCase(), {
    a:'‡§Ö', b:'‡§¨', c:'‡§ö', d:'‡§¶', e:'‡§è', f:'‡§´', g:'‡§ó', h:'‡§π', i:'‡§á', j:'‡§ú', k:'‡§ï', l:'‡§≤', m:'‡§Æ', n:'‡§®', o:'‡§ì', p:'‡§™', q:'‡§ï‡§º', r:'‡§∞', s:'‡§∏', t:'‡§§', u:'‡§â', v:'‡§µ', w:'‡§µ', x:'‡§ï‡•ç‡§∑', y:'‡§Ø', z:'‡§ú‡§º'
  }) },

  { id:'randomcase', name:'rAnDoMcAsE', cat:'Case', fn: t => Array.from(t).map(c=> Math.random()>0.5? c.toUpperCase(): c.toLowerCase()).join('') },

  { id:'tinycaps', name:'Tiny Caps (alt)', cat:'Case', fn: t => mapWithTable(t.toLowerCase(), SMALL_CAPS) },

  { id:'box-art', name:'Box-art-ish', cat:'Boxes', fn: t => Array.from(t).map(c => `[${c}]`).join('') },

  /* add more variants as needed - this list currently ~60 transforms */
];

/* ---------- UI logic ---------- */
const inputText = el('inputText'), generateBtn = el('generateBtn'), resultsEl = el('results');
const copyAllBtn = el('copyAllBtn'), downloadBtn = el('downloadBtn');
const themeBtn = el('themeBtn'), themeList = document.getElementById('themeList');
const themeItems = document.querySelectorAll('.theme-item');
const sidebar = el('sidebar'), hambBtn = el('hambBtn'), closeSidebar = el('closeSidebar');
const countLabel = el('countLabel');

let CURRENT_RESULTS = [];

/* UI: render results grouped by category with pagination (20 per category default) */
function groupByCategory(transforms){
  const by = {};
  transforms.forEach(t => {
    by[t.cat] = by[t.cat] || [];
    by[t.cat].push(t);
  });
  return by;
}

function renderTransforms(text, opts = { perCategory: 20 }){
  resultsEl.querySelectorAll('.cat-block')?.forEach(n=>n.remove());
  const groups = groupByCategory(TRANSFORMS);
  let totalCount = 0;
  Object.keys(groups).sort().forEach(cat => {
    const arr = groups[cat];
    totalCount += arr.length;
    const block = document.createElement('div'); block.className = 'card cat-block';
    const catTitle = document.createElement('div'); catTitle.className = 'category-title'; catTitle.textContent = `${cat} (${arr.length})`;
    block.appendChild(catTitle);

    const listWrap = document.createElement('div'); listWrap.className = 'list-wrap';
    // show limited n
    const showCount = Math.min(opts.perCategory, arr.length);
    for(let i=0;i<showCount;i++){
      const t = arr[i];
      const row = makeResultRow(t, text);
      listWrap.appendChild(row);
    }
    block.appendChild(listWrap);

    if(arr.length > opts.perCategory){
      const loadBtn = document.createElement('button'); loadBtn.className='load-more'; loadBtn.textContent = 'Load more';
      loadBtn.addEventListener('click', ()=> {
        // append remaining
        for(let i=opts.perCategory;i<arr.length;i++){
          listWrap.appendChild(makeResultRow(arr[i], text));
        }
        loadBtn.remove();
      });
      block.appendChild(loadBtn);
    }

    resultsEl.appendChild(block);
  });

  countLabel.textContent = Object.keys(TRANSFORMS).length;
  // show total results as transforms* (not expanded)
}

/* build a single result row element */
function makeResultRow(transform, input){
  const out = (transform.fn && typeof transform.fn === 'function') ? safeRun(transform.fn, input) : input;
  const row = document.createElement('div'); row.className='result-row';
  const left = document.createElement('div'); left.className='result-left';
  const title = document.createElement('div'); title.className='result-title'; title.textContent = out || '';
  const sub = document.createElement('div'); sub.className='result-sub'; sub.textContent = transform.name;
  left.appendChild(title); left.appendChild(sub);

  const actions = document.createElement('div'); actions.className='result-actions';
  const copyBtn = document.createElement('button'); copyBtn.className='btn copy'; copyBtn.textContent='Copy';
  copyBtn.addEventListener('click', async ()=> {
    try{
      await copyText(out);
      showToast('Copied');
      copyBtn.textContent = 'Copied';
      setTimeout(()=> copyBtn.textContent='Copy', 900);
    }catch(e){ alert('Copy failed'); }
  });

  const useBtn = document.createElement('button'); useBtn.className='btn use'; useBtn.textContent='Use';
  useBtn.addEventListener('click', ()=> {
    inputText.value = out;
    inputText.focus();
  });

  actions.appendChild(copyBtn); actions.appendChild(useBtn);
  row.appendChild(left); row.appendChild(actions);
  return row;
}

/* safely run transform function */
function safeRun(fn, text){
  try{ return (fn(text)||'').toString(); } catch(e){ console.warn('transform error', e); return text; }
}

/* toast (small) */
function showToast(msg){
  const t = document.createElement('div'); t.textContent = msg;
  t.style.position='fixed'; t.style.bottom='18px'; t.style.left='50%'; t.style.transform='translateX(-50%)';
  t.style.padding='8px 12px'; t.style.borderRadius='10px'; t.style.background='rgba(0,0,0,0.75)'; t.style.color='white'; t.style.zIndex=9999;
  document.body.appendChild(t);
  setTimeout(()=> t.remove(), 900);
}

/* ---------- generate / copy all / download ---------- */
generateBtn.addEventListener('click', ()=> {
  const txt = inputText.value || '';
  if(!txt.trim()) return alert('Type some text first.');
  renderTransforms(txt, { perCategory: 20 });
});

copyAllBtn.addEventListener('click', async ()=> {
  const txt = inputText.value || '';
  if(!txt.trim()) return alert('Type some text first.');
  // create combined text of results (category headers + transforms)
  const groups = groupByCategory(TRANSFORMS);
  let out = '';
  Object.keys(groups).sort().forEach(cat => {
    out += cat + '\n';
    groups[cat].forEach(t => { out += (safeRun(t.fn, txt) || '') + '\n'; });
    out += '\n';
  });
  try{ await copyText(out); showToast('All transforms copied'); } catch(e){ alert('Copy failed'); }
});

downloadBtn.addEventListener('click', ()=> {
  const txt = inputText.value || '';
  if(!txt.trim()) return alert('Type some text first.');
  const groups = groupByCategory(TRANSFORMS);
  let out = '';
  Object.keys(groups).sort().forEach(cat => {
    out += cat + '\n';
    groups[cat].forEach(t => { out += (safeRun(t.fn, txt) || '') + '\n'; });
    out += '\n';
  });
  downloadText('pirateruler-fonts.txt', out);
});

/* ---------- Theme & sidebar ---------- */
themeItems.forEach(it => it.addEventListener('click', ()=> applyTheme(it.dataset.theme)));
themeBtn.addEventListener('click', ()=> { themeList.style.display = themeList.style.display === 'block' ? 'none' : 'block'; });

function applyTheme(name){
  ['dark','ocean','sunset'].forEach(c => document.documentElement.classList.remove(c));
  if(name !== 'light') document.documentElement.classList.add(name);
  themeBtn.textContent = (name.charAt(0).toUpperCase() + name.slice(1)) + ' ‚ñæ';
  localStorage.setItem('pr-fonts-theme', name);
}
(function initTheme(){ const t = localStorage.getItem('pr-fonts-theme') || 'light'; applyTheme(t); })();

hambBtn.addEventListener('click', ()=> {
  if(sidebar.style.display === 'block' || sidebar.classList.contains('show')){ sidebar.classList.remove('show'); sidebar.style.display='none'; }
  else { sidebar.style.display='block'; sidebar.classList.add('show'); }
});
closeSidebar.addEventListener('click', ()=> { sidebar.style.display='none'; sidebar.classList.remove('show'); });

/* initial render with default text */
renderTransforms(inputText.value || 'PirateRuler', { perCategory: 20 });

/* hide theme list when clicking outside */
document.addEventListener('click', (e)=> { if(!document.getElementById('themeSelectWrap')?.contains(e.target)) themeList.style.display='none'; });

/* keyboard: Enter to generate */
inputText.addEventListener('keydown', (e)=> { if(e.key === 'Enter') generateBtn.click(); });

/* Done */
</script>
</body>
</html>
